{% extends "browse.html" %}

{% block styles %}
  {{ super() }}
  <link rel="stylesheet" type="text/css" href="{{ url_for('file_actions.static', filename='style.css') }}"/>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('file_actions.static', filename='script.js') }}"></script>
{% endblock %}

{% block header %}
  <h1>{{ breadcrumbs(file, circular=True) }}</h1>
  <h2>Selection</h2>
{% endblock %}

{% block content %}
  <form method="post">
    <div class="group">
      {% if cut_support %}
        <input class="button text" type="submit" name="mode-cut" value="Cut selected">
      {% endif %}
      <input class="button text" type="submit" name="mode-copy" value="Copy selected">
    </div>
    {% if file.is_empty %}
      <p>No files in directory</p>
    {% else %}
      <table class="browser">
        <thead>
          <tr>
            <th class="select-all-container"></th>
            {{ th('Name') }}
            {{ th('Mimetype') }}
            {{ th('Modified') }}
            {{ th('Size') }}
          </tr>
        </thead>
        <tbody>
          {% for f in file.listdir(sortkey=sort_fnc, reverse=sort_reverse) %}
            {% if f.link and f.link.text %}
              <tr>
                <td>
                  <input type="checkbox" name="path" value="{{ f.urlpath }}"
                  {%- if f.urlpath in clipboard %} checked="checked"{% endif -%}
                  >
                </td>
                <td>{{ f.link.text }}</td>
                <td>{{ f.type or '' }}</td>
                <td>{{ f.modified or '' }}</td>
                <td>{{ f.size or '' }}</td>
              </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  </form>
{% endblock %}
